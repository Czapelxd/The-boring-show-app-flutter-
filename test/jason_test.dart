import 'package:flutter_test/flutter_test.dart';
import 'package:the_boring_show/json_parsing.dart';


void main() {
  test ("parses topstories.json", () {
    const jsonString = "[20164062,20165254,20163389,20166891,20157116,20166369,20166131,20165839,20164809,20165821,20163975,20163500,20166070,20166730,20164014,20164531,20164822,20163530,20166201,20163467,20162918,20163278,20167313,20163157,20161841,20164763,20162015,20147672,20154181,20158918,20154255,20137918,20161637,20162199,20162418,20162169,20160718,20163495,20154303,20154750,20166240,20157809,20162763,20155636,20148378,20161902,20161214,20158386,20160634,20165560,20162006,20162777,20165607,20162261,20156168,20154210,20153306,20162087,20165321,20148600,20156842,20160013,20156090,20157196,20158266,20154289,20158418,20161337,20152493,20159153,20160662,20145630,20147989,20153210,20150230,20161445,20164051,20156815,20165418,20163243,20162959,20145206,20149415,20152534,20149665,20161078,20144619,20157291,20156285,20143279,20160478,20151055,20159216,20145685,20157017,20158039,20156836,20159926,20154327,20156923,20157931,20155608,20161868,20148771,20153472,20161549,20143041,20150688,20162152,20147376,20157882,20165054,20147764,20156425,20156158,20147884,20155248,20155098,20148639,20153313,20156640,20153128,20160342,20163705,20147116,20154372,20148308,20146203,20148588,20147228,20144870,20145250,20147015,20148022,20152197,20141417,20153868,20153123,20157524,20158420,20144980,20157472,20160809,20156297,20160852,20154513,20163328,20152608,20156065,20150749,20148428,20162611,20154529,20142960,20159039,20148787,20153567,20144863,20160314,20145984,20143707,20145734,20162789,20159602,20151755,20151803,20154382,20148956,20149800,20147381,20146168,20140747,20144552,20147808,20158042,20158004,20157684,20150179,20155859,20154583,20154020,20160693,20155595,20160667,20159081,20159067,20154424,20144720,20150813,20145977,20149779,20157661,20141217,20142798,20161211,20163225,20145344,20147930,20157525,20142130,20145704,20145663,20151569,20150658,20158126,20163675,20160499,20150192,20157523,20141222,20156735,20161362,20140663,20149439,20141296,20142787,20150431,20143277,20158995,20162952,20160955,20162947,20141224,20153353,20143568,20140680,20151882,20138636,20142828,20156002,20146476,20158845,20165157,20142601,20140804,20144152,20141935,20160537,20149304,20156750,20160473,20144849,20162658,20139121,20146523,20161091,20154378,20151401,20141654,20143175,20161460,20149263,20158309,20149527,20148942,20155020,20148865,20154366,20145032,20141482,20155073,20154285,20142912,20152727,20146538,20158000,20143935,20156182,20156148,20156108,20142753,20145395,20148954,20140790,20145911,20148609,20155553,20145239,20143796,20145304,20142907,20143794,20139757,20140826,20155995,20137837,20138185,20150737,20142989,20153340,20146204,20145035,20142600,20146648,20140838,20138110,20152218,20154481,20140482,20138702,20151912,20138230,20139648,20146840,20143386,20154207,20141565,20142545,20149988,20152686,20154165,20138409,20144209,20154265,20139874,20140504,20147881,20161313,20142089,20157751,20160335,20154441,20153073,20143010,20147706,20153865,20151085,20154817,20138546,20156791,20138961,20140328,20161341,20155015,20148189,20138162,20140215,20149377,20159503,20148541,20151280,20138062,20145318,20149111,20155585,20141088,20152074,20154330,20148346,20146730,20144729,20138662,20153713,20147130,20142117,20139057,20158401,20154737,20138448,20160177,20153900,20158002,20140577,20159953,20155541,20142346,20149437,20158694,20159749,20143314,20159654,20144970,20149215,20149189,20159303,20160245,20159229,20144410,20142572,20142172,20156096,20158941,20158893,20146795,20144665,20155706,20153475,20158594,20158480,20155392,20140454,20140239,20150416,20157970,20154786,20157628,20152238,20152915,20157462,20145343,20143947,20157390,20150871,20154551,20145723,20147412,20149020,20150185,20154434,20157039,20138096,20148052,20153260,20154196,20141158,20153161,20144322,20156261,20153570,20155945,20139467,20155860,20155825,20152873,20146408,20141023,20163080,20153684,20148809,20152624,20143232,20146890,20142608,20138194,20151501,20141943,20147916,20148608,20153067,20141526,20141418,20139220,20151062,20140403,20138189,20154965,20140754,20140388,20141748,20141632,20153808,20137955,20151966,20146083,20153435,20151579,20148116,20142531,20151392,20147575,20150637,20152609,20143911,20152688,20141483,20158110,20152565,20152514,20152473,20148593,20148511,20147607,20151968,20151481,20151417,20140104,20143933,20150835,20150631,20141753,20150471,20141189,20149937,20150994,20149602,20149299,20149780,20140174,20148513,20138953,20138849,20147113,20141019,20140978,20143562,20146584,20146236,20146154,20142588,20145185]";
    expect(parseTopStories(jsonString).first, 20164062);
  });


  test ("parses item.json", () {
    const jsonString = """
    {"by":"dhouston","descendants":71,"id":8863,"kids":[9224,8917,8952,8884,8887,8869,8958,8940,8908,9005,8873,9671,9067,9055,8865,8881,8872,8955,10403,8903,8928,9125,8998,8901,8902,8907,8894,8870,8878,8980,8934,8943,8876],"score":104,"time":1175714200,"title":"My YC app: Dropbox - Throw away your USB drive","type":"story","url":"http://www.getdropbox.com/u/2/screencast.html"}
    """;
    expect(parseArticle(jsonString).by, "dhouston");
  });
}